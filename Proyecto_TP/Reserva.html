<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alta de Reserva</title>
    <link rel="stylesheet" href="./css/estilos_reserva.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="icon" href="./imagenes/icon-draghy.ico" class="icon">
</head>

<body>
    <!-- contenedor principal -->
    <div class="contenedor">

        <!-- encabezado -->
        <header class="encabezado">
            <div class="enc-izq">
                <img src="./imagenes/logo3.PNG" alt="logo1">

            </div>

            <div class="enc-centro">
                <h1>Hotel Draghy</h1>

            </div>
            <div class="enc-der">
                <img src="./imagenes/logo3.PNG" alt="logo1">

            </div>

        </header>
        <!-- barra de navegacion -->
        <nav class="menu">
            <ul>
                <li><a href="index.html">Principal</a></li>
                <li><a href="Habitaciones.html">Habitaciones</a></li>
                <li><a href="Tarifas.html">Tarifas</a></li>
                <li><a href="Contacto.html">Contacto</a></li>
            </ul>

        </nav>

        <body>
            <h2>Ingresa tus datos para Reservar</h2>

            <form id="formulario" name="fvalida">
                <label for="Codigo">Código de Reserva:</label>
                <input type="text" id="Codigo" name="Codigo" required><br>
                <label for="Nombre">Nombre:</label>
                <input type="text" name="nombre" id="Nombre" size="15" required>
                <br> <br>
                <label for="Apellido">Apellido:</label>
                <input type="text" name="Apellido" id="Apellido" required>
                <br><br>
                <label for="dni">Documento:</label>
                <input type="number" name="dni" id="dni" min="1000000" maxlenght="8">
                <br><br>
                <label for="FeIng">Ingreso:</label>
                <input type="date" name="FeIng" id="FeIng" required>
                <label for="FeEgr">Egreso:</label>
                <input type="date" name="FeEgr" id="FeEgr" required>
                <br><br>
                <label for="Hus">Cantidad de Huspedes:</label>
                <input type="number" name="Hus" id="Hus" min="1" max="19" required>
                <br><br>
                <label for="Email">Correo: </label>
                <input type="email" name="Email" required>
                <br><br>
                <label for="Mensaje">Mensaje:</label><br>
                <textarea name="Mensaje" id="Mensaje" cols="40" rows="3" placeholder="Escribe tu consulta"></textarea>

                <!-- Botones para controlar el formulario -->
                <br><br>
                <button type="submit">Reservar</button>
                <a href="contacto.html">Volver al Formulario</a>
                <br><br>
            </form>
            <br><br>

            <script>
                const URL = "http://127.0.0.1:5501/"
                //const URL = "https://arielfsp.pythonanywhere.com/"
                //const URL = "https://prueba23513.pythonanywhere.com/"

                // Capturamos el evento de envío del formulario
                document.getElementById('formulario').addEventListener('submit', function (event) {
                    event.preventDefault(); // Evitamos que se envie el form 

                    let formData = new FormData();
                    formData.append('Codigo', document.getElementById('Codigo').value);
                    formData.append('Nombre', document.getElementById('Nombre').value);
                    formData.append('Apellido', document.getElementById('Apellido').value);
                    formData.append('dni', document.getElementById('dni').value);
                    formData.append('FeIng', document.getElementById('FeIng').value);
                    formData.append('FeEgr', document.getElementById('FeEgr').value);
                    formData.append('Hus', document.getElementById('Hus').value);
                    formData.append('Email', document.getElementById('Email').value);
                    formData.append('Mensaje', document.getElementById('Mensaje').value);
                    //formData.append('imagen', document.getElementById('imagenProducto').files[0]);

                    fetch(URL + 'reserva', {
                        method: 'POST',
                        body: formData // Aquí enviamos formData en lugar de JSON
                    })
                        .then(function (response) {
                            if (response.ok) { return response.json(); }
                        })
                        .then(function (data) {
                            alert('Reserva agregada correctamente.');
                            // Limpiar el formulario para el proximo producto
                            document.getElementById('Codigo').value = "";
                            document.getElementById('Nombre').value = "";
                            document.getElementById('Apellido').value = "";
                            document.getElementById('dni').value = "";
                            document.getElementById('FeIng').value = "";
                            document.getElementById('FeEgr').value = "";
                            document.getElementById('Hus').value = "";
                            document.getElementById('Email').value = "";
                            //document.getElementById('imagen').value = "";
                            document.getElementById('Mensaje').value = "";
                        })
                        .catch(function (error) {
                            // Mostramos el error, y no limpiamos el form.
                            alert('Error al agregar la reserva, intente nuevamente.');
                        });
                })
                
                
            </script>
            <!-- pie de pagina -->
            <footer class="pie">
                <div>
                    <p> &copy; 2023 Hotel Draghy</p>
                </div>
                <div class="iconos">
                    <a href="https://www.facebook.com/?locale=es_LA"><span class="fab fa-facebook"
                            title="Ir a facebook"></span></a>
                    <a href="https://www.instagram.com"><span class="fab fa-instagram"
                            title="Ir a Instagram"></span></a>
                    <a href="https://twitter.com/?lang=es"><span class="fab fa-twitter" title="Ir a Twitter"></span></a>
                    <a href="mailto: consultas@hoteldraghy.com?subject=contacto"><span class="fas fa-envelope"
                            title="Enviar correo"></span></a>
                </div>
            </footer>
            
        </body>
        
</html>

<!--         
        <input type="button" id="b1" value="Enviar" onclick="validarEnviar()" class="button">
        <input type="reset" value="Borrar formulario" class="button">
    -->


<!--enctype="multipart/form-data es necesario para enviar archivos al back.-->
<!-- <form id="formulario" enctype="multipart/form-data>
        <label for="codigo">Código:</label>
        <input type="text" id="codigo" name="codigo" required><br>

        <label for="descripcion">Descripción:</label>
        <input type="text" id="descripcion" name="descripcion" required><br>

        <label for="cantidad">Cantidad:</label>
        <input type="number" id="cantidad" name="cantidad" required><br>

        <label for="precio">Precio:</label>
        <input type="number" step="0.01" id="precio" name="precio" required><br>

        <!-- <label for="imagenProducto">Imagen del producto:</label>
        <input type="file" id="imagenProducto" name="imagen"> -->

<!-- <label for="proveedorProducto">Proveedor:</label>
        <input type="text" id="proveedorProducto" name="proveedor">
    </form> -->